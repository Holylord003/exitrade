<%-include("../../partials/header");%>

<div class="container-xl">

    <h1 class="app-page-title">Overview</h1>

    <div class="app-card alert alert-dismissible shadow-sm mb-4 border-left-decoration" role="alert">
        <div class="inner">
            <div class="app-card-body p-3 p-lg-4">
                <h3 class="mb-3">Hi Investor, <%=user.username%>!</h3>
                <div class="row gx-5 gy-3">
                    <div class="col-12 col-lg-9">

                        <%if(user.investment_status !== "active"){%>

                        <div>You don't have any Active Investment at the moment, Kindly Setup One </div>

                        <%}else{%>

                        <!-- <div>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0"
                                    aria-valuemax="100">25%</div>
                            </div>
                        </div> -->

                        <%}%>

                        
                    </div>
                    <!--//col-->

                    <%if(user.investment_status !== "active"){%>

                    <div class="col-12 col-lg-3">
                        <a class="btn app-btn-primary"
                            href="/dashboard/plans">
                            
                            <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 16 16" fill="currentColor" class="bi bi-graph-up mr-2"
                                viewBox="0 0 16 16">
                                <path fill-rule="evenodd"
                                    d="M0 0h1v15h15v1H0V0zm10 3.5a.5.5 0 0 1 .5-.5h4a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V4.9l-3.613 4.417a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61L13.445 4H10.5a.5.5 0 0 1-.5-.5z" />
                            </svg> Setup a Plan</a>
                    </div>
                    <!--//col-->

                    <%}%>
                    
                </div>
                
            </div>
            <!--//app-card-body-->

        </div>
        <!--//inner-->
    </div>
    <!--//app-card-->

    <div class="row g-4 mb-4">
        <div class="col-6 col-lg-3">
            <div class="app-card app-card-stat shadow-sm h-100">
                <div class="app-card-body p-3 p-lg-4">
                    <h4 class="stats-type mb-1">Investment Capital</h4>
                    <div class="stats-figure"><%=webSettings.website_currency + user.investment_capital.toLocaleString()%></div>

                </div>
                <!--//app-card-body-->
                <a class="app-card-link-mask" href="#"></a>
            </div>
            <!--//app-card-->
        </div>
        <!--//col-->

        <div class="col-6 col-lg-3">
            <div class="app-card app-card-stat shadow-sm h-100">
                <div class="app-card-body p-3 p-lg-4">
                    <h4 class="stats-type mb-1">ROI Balance</h4>
                    <div class="stats-figure"><%=webSettings.website_currency + user.roi_balance.toLocaleString()%></div>
                    
                </div>
                <!--//app-card-body-->
                <a class="app-card-link-mask" href="#"></a>
            </div>
            <!--//app-card-->
        </div>
        <!--//col-->
        <div class="col-6 col-lg-3">
            <div class="app-card app-card-stat shadow-sm h-100">
                <div class="app-card-body p-3 p-lg-4">
                    <h4 class="stats-type mb-1">Referral Balance</h4>
                    <div class="stats-figure"><%=webSettings.website_currency + user.referral_balance.toLocaleString()%></div>
                    
                </div>
                <!--//app-card-body-->
                <a class="app-card-link-mask" href="#"></a>
            </div>
            <!--//app-card-->
        </div>
        <!--//col-->
        <div class="col-6 col-lg-3">
            <div class="app-card app-card-stat shadow-sm h-100">
                <div class="app-card-body p-3 p-lg-4">
                    <h4 class="stats-type mb-1">Days Since Investment</h4>
                    <div class="stats-figure"><%=user.investment_track%></div>
                    <div class="stats-meta"><%=user.investment_track > 1 ? 'Days' :'Day'%></div>
                </div>
                <!--//app-card-body-->
                <a class="app-card-link-mask" href="#"></a>
            </div>
            <!--//app-card-->
        </div>
        <!--//col-->
    </div>
    <!--//row-->
   
   
    <!--//row-->
    <div class="row g-4 mb-4">
        <div class="col-12 col-lg-6">
            <div class="app-card app-card-basic d-flex flex-column align-items-start shadow-sm">
                <div class="app-card-header p-3 border-bottom-0">
                    <div class="row align-items-center gx-3">
                        <div class="col-auto">
                            <div class="app-icon-holder">
                                <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-receipt"
                                    fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                                    <path fill-rule="evenodd"
                                        d="M1.92.506a.5.5 0 0 1 .434.14L3 1.293l.646-.647a.5.5 0 0 1 .708 0L5 1.293l.646-.647a.5.5 0 0 1 .708 0L7 1.293l.646-.647a.5.5 0 0 1 .708 0L9 1.293l.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .708 0l.646.647.646-.647a.5.5 0 0 1 .801.13l.5 1A.5.5 0 0 1 15 2v12a.5.5 0 0 1-.053.224l-.5 1a.5.5 0 0 1-.8.13L13 14.707l-.646.647a.5.5 0 0 1-.708 0L11 14.707l-.646.647a.5.5 0 0 1-.708 0L9 14.707l-.646.647a.5.5 0 0 1-.708 0L7 14.707l-.646.647a.5.5 0 0 1-.708 0L5 14.707l-.646.647a.5.5 0 0 1-.708 0L3 14.707l-.646.647a.5.5 0 0 1-.801-.13l-.5-1A.5.5 0 0 1 1 14V2a.5.5 0 0 1 .053-.224l.5-1a.5.5 0 0 1 .367-.27zm.217 1.338L2 2.118v11.764l.137.274.51-.51a.5.5 0 0 1 .707 0l.646.647.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.646.646.646-.646a.5.5 0 0 1 .708 0l.509.509.137-.274V2.118l-.137-.274-.51.51a.5.5 0 0 1-.707 0L12 1.707l-.646.647a.5.5 0 0 1-.708 0L10 1.707l-.646.647a.5.5 0 0 1-.708 0L8 1.707l-.646.647a.5.5 0 0 1-.708 0L6 1.707l-.646.647a.5.5 0 0 1-.708 0L4 1.707l-.646.647a.5.5 0 0 1-.708 0l-.509-.51z">
                                    </path>
                                    <path fill-rule="evenodd"
                                        d="M3 4.5a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 1 1 0 1h-6a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h6a.5.5 0 0 1 0 1h-6a.5.5 0 0 1-.5-.5zm8-6a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5zm0 2a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5z">
                                    </path>
                                </svg>
                            </div>
                            <!--//icon-holder-->

                        </div>
                        <!--//col-->
                        <div class="col-auto">
                            <h4 class="app-card-title">Investment Plan Details</h4>
                        </div>
                        <!--//col-->
                    </div>
                    <!--//row-->
                </div>
                
                <div class="app-card app-card-settings p-4">
                
                    <div class="app-card-body">
                        <div class="mb-2"><strong>Current Plan:</strong> <%=plan.plan_name%></div>
                        <div class="mb-2"><strong>Status:</strong> 
                        <%if(user.investment_status === "active"){%>
                        <span class="badge bg-success capitalize"><%=user.investment_status%></span>
                        <%}else{%>
                        <span class="badge bg-danger capitalize"><%=user.investment_status%></span>
                        <%}%>
                        </div>
                        <div class="mb-2"><strong>Expires:</strong> <%=user.investment_status === "active" ? plan.plan_duration : 'None'  %></div>
                        
                        <div class="mb-4 capitalize"><strong>Role:</strong> <a href="javascript:void(0)"><%=user.role%></a></div>
                        <div class="row justify-content-between">
                            <%if(user.investment_status !== "active"){%>
                            <div class="col-auto">
                                <a class="btn app-btn-primary" href="/dashboard/plans">Create Plan</a>
                            </div>
                            <%}%>
                            

                            
                        </div>
                
                    </div>
                    <!--//app-card-body-->
                
                </div>

            </div>
            <!--//app-card-->
        </div>
        <!--//col-->

        <div class="col-12 col-lg-6">
            <div class="app-card app-card-basic d-flex flex-column align-items-start shadow-sm">
                <div class="app-card-header p-3 border-bottom-0">
                    <div class="row align-items-center gx-3">
                        <div class="col-auto">
                            <div class="app-icon-holder">
                                <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" fill="currentColor" class="bi bi-cash-stack"
                                    viewBox="0 0 16 16">
                                    <path d="M1 3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1H1zm7 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"></path>
                                    <path
                                        d="M0 5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V5zm3 0a2 2 0 0 1-2 2v4a2 2 0 0 1 2 2h10a2 2 0 0 1 2-2V7a2 2 0 0 1-2-2H3z">
                                    </path>
                                </svg>
                            </div>
                            <!--//icon-holder-->
        
                        </div>
                        <!--//col-->
                        <div class="col-auto">
                            <h4 class="app-card-title">My Wallet</h4>
                        </div>
                        <!--//col-->
                    </div>
                    <!--//row-->
                </div>
                <!--//app-card-header-->
                <%if(wallets){%>

                <div class="app-card-body px-4">
                
                    <div class="intro pt-3">
                        <div class="mb-2"><strong>Bank Account Name:</strong> <span style="text-transform: uppercase;" class="badge bg-success">
                            <%=wallets.wallet_bank_name%>
                        </span> </div>

                        <div class="mb-2"><strong>Bank Account Number:</strong> <span style="text-transform: uppercase;" class="badge bg-success">
                            <%=wallets.wallet_bank_number%>
                        </span> </div>
                        
                        <div class="mb-2"><strong>Bank Type:</strong> <span style="text-transform: uppercase;" class="badge bg-success">
                            <%=wallets.wallet_bank_type%>
                        </span> </div>

                    </div>
                </div>
                <!--//app-card-body-->
                <div class="app-card-footer p-4 mt-auto">
                    <a class="btn app-btn-secondary" href="/dashboard/settings/wallet">Edit Wallet</a>
                </div>
                <!--//app-card-footer-->

                <%}else{%>

                <div class="app-card-body px-4">
                
                    <div class="intro">You dont have any wallet at the moment, please try to create one.</div>
                </div>
                <!--//app-card-body-->
                <div class="app-card-footer p-4 mt-auto">
                    <a class="btn app-btn-secondary" href="/dashboard/settings/wallet">Create New</a>
                </div>
                <!--//app-card-footer-->

                <%}%>
            </div>
            <!--//app-card-->
        </div>
       
    </div>
    <!--//row-->

<div class="row g-4 mb-4">
<div class="app-card app-card-stat shadow-sm h-100">
    <div class="app-card-body p-3 p-lg-4">

<h1 class="app-page-title text-left">My Referral Link</h1>

<div class="upline text-left pb-3">
    <strong>My Upline Username</strong>: <span class="badge bg-success">
        <%=user.username%>
    </span>
</div>
<div class="referral-link">
    <input type="url" class="form-control" id="link" value="<%=url%>/register?ref=<%=user.uid%>">
<button type="button" class="btn app-btn-primary p-2">Copy Link</button>
</div>
    </div></div>
</div>


<div class="row g-4 mb-4">
    <div class="app-card app-card-stats-table h-100 shadow-sm">
        <div class="app-card-header p-3">
            <div class="row justify-content-between align-items-center">
                <div class="col-auto">
                    <h4 class="app-card-title">Last 10 Referrals</h4>
                </div>
                <!--//col-->
                <div class="col-auto">
                    <div class="card-header-action">
                        <a href="/dashboard/history/referral">View More</a>
                    </div>
                    <!--//card-header-actions-->
                </div>
                <!--//col-->
            </div>
            <!--//row-->
        </div>
        <!--//app-card-header-->
        <div class="app-card-body p-3 p-lg-4">
            <div class="table-responsive">
                <table class="table table-borderless mb-0">
                    <thead>
                        <tr>
                            <th class="meta stat-cell">#</th>
                            <th class="meta stat-cell">Username</th>
                            <th class="meta stat-cell">Amount Earned</th>
                            <th class="meta stat-cell">Status</th>
                            <th class="meta stat-cell">Date</th>
                        </tr>
                    </thead>
                    <tbody>
                        
                        <%referrals.map((rf,index) =>{%>
                        <tr>
                        
                            <td class="stat-cell"><%=index + 1%></td>
                            <td class="stat-cell"><%=rf.fullname%> (<%=rf.username%>)</td>
                            <td class="stat-cell"><%=rf.amount%></td>
                            <td class="stat-cell">
                                <%if(rf.status){%>
                                    <span class="badge bg-success">Verified</span>
                                <%}else{%>
                                <span class="badge bg-warning">Pending</span>
                                <%}%>
                            </td>
                            <td class="stat-cell"><%=rf.referral_created%></td>
                        </tr>
                        <%})%>
                    </tbody>
                </table>
            </div>
            <!--//table-responsive-->
        </div>
        <!--//app-card-body-->
    </div>
</div>

</div>


<script src="/js/user/dashboard.js"></script>
<%-include("../../partials/footer");%>